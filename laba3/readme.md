# Лабораторная работа №3 Разработка графического редактора с алгоритмами построения линий

**Цель работы:** Создание графического приложения на Java для рисования линий с использованием различных алгоритмов растрирования, включая пошаговый алгоритм и алгоритм Брезенхема, с визуализацией на координатной сетке.

## Описание программы

Программа `ImageEdit` представляет собой графический редактор, предназначенный для изучения и сравнения алгоритмов построения отрезков. Приложение позволяет рисовать линии двумя различными методами, визуализировать их на сетке и измерять производительность алгоритмов.

## Функциональность

**Режимы работы:**
- `MODE_PEN` (0) - режим рисования произвольных линий
- `MODE_ERASE` (1) - режим стирания
- `MODE_SBS` (2) - режим построения линий пошаговым алгоритмом
- `MODE_BRES` (4) - режим построения линий алгоритмом Брезенхема

**Основные возможности:**
- Рисование линий двумя различными алгоритмами
- Отображение координатной сетки с настраиваемым шагом
- Визуализация осей координат с подписями
- Измерение времени выполнения алгоритмов
- Сохранение истории построенных отрезков
- Интерактивное рисование с помощью мыши

## Техническая реализация

### Архитектура приложения

**Основные классы:**
- `ImageEdit` - главный класс приложения
- `MyFrame` - пользовательский класс окна
- `DrawPanel` - панель для рисования
- `Pair` - вспомогательный класс для хранения координат

**Графический интерфейс:**
- Вертикальная панель инструментов с кнопками режимов
- Главное меню с настройками сетки и алгоритмов
- Основная область рисования с координатной сеткой

### Алгоритмы построения линий

#### 1. Пошаговый алгоритм (Step-by-Step)

```java
private void drawLineStepByStep(Graphics2D g2, int x1, int y1, int x2, int y2, boolean big)
```

**Принцип работы:**
- Вычисляется угловой коэффициент k = dy/dx
- Вычисляется свободный член b = y1 - k*x1
- В зависимости от угла наклона:
  - При |dx| ≥ |dy|: итерация по x, вычисление y = k*x + b
  - При |dx| < |dy|: итерация по y, вычисление x = (y - b)/k
- Округление координат до ближайшего целого

**Особенности:**
- Использует вещественную арифметику
- Прост в понимании и реализации
- Менее эффективен из-за операций с плавающей точкой

#### 2. Алгоритм Брезенхема

```java
private void drawLineBresenham(Graphics2D g2, int x1, int y1, int x2, int y2, boolean big)
```

**Принцип работы:**
- Вычисление абсолютных разностей dx и dy
- Определение шагов sx, sy по осям
- Использование целочисленной ошибки err = dx - dy
- На каждой итерации:
  - Рисуется текущий пиксель
  - Корректируется ошибка и координаты

**Преимущества:**
- Использует только целочисленную арифметику
- Высокая производительность
- Стандарт в компьютерной графике

### Система координат и визуализация

**Координатная сетка:**
- Настраиваемая ширина ячейки gridW
- Автоматическое масштабирование при изменении размера окна
- Отображение осей X и Y со стрелками
- Подписи координат по осям

**Двойное отображение:**
- Малое изображение: координаты в единицах сетки
- Большое изображение: координаты в пикселях
- Параллельное построение для сравнения

### Управление и взаимодействие

**Обработка событий мыши:**
- `mousePressed` - фиксация начальной точки
- `mouseDragged` - рисование в режимах PEN и ERASE
- `mouseReleased` - завершение построения отрезка

**Меню и инструменты:**
- Настройка ширины сетки
- Ручной ввод координат для точного построения
- Сравнение времени выполнения алгоритмов

## Использование приложения

### Последовательность работы:

1. **Выбор режима работы:**
   - "P" - произвольное рисование
   - "L" - ластик
   - "S" - построение линий пошаговым алгоритмом
   - "B" - построение линий алгоритмом Брезенхема

2. **Построение линий:**
   - **Интерактивно:** Зажать левую кнопку мыши и протянуть
   - **Точно:** Через меню "Линия" → ввод точных координат

3. **Настройка сетки:**
   - Меню "Сетка" → "Ширина" - установка размера ячейки

4. **Сравнение производительности:**
   - Меню "Линия" → "Время" - просмотр времени выполнения

### Особенности работы:

- **Автоматическое масштабирование** при изменении размера окна
- **Сохранение истории** построенных отрезков
- **Двойная визуализация** - в единицах сетки и в пикселях
- **Измерение производительности** в наносекундах

## Результаты и сравнение алгоритмов

### Производительность:
- **Алгоритм Брезенхема** демонстрирует лучшую производительность благодаря целочисленным операциям
- **Пошаговый алгоритм** менее эффективен из-за операций с плавающей точкой и округления

### Качество линий:
- Оба алгоритма обеспечивают удовлетворительное качество для прямых отрезков
- Алгоритм Брезенхема дает более равномерное распределение пикселей

## Технические особенности реализации

### Графическая подсистема:
- Использование `BufferedImage` для двойной буферизации
- `Graphics2D` для расширенных возможностей рисования
- Автоматическая перерисовка при изменении размеров

### Архитектурные решения:
- Разделение логики отображения и алгоритмов
- Использование паттерна слушателей для обработки событий
- Инкапсуляция состояний и режимов работы

Заключение
В ходе лабораторной работы было разработано приложение для изучения алгоритмов растрирования отрезков. Программа успешно реализует:

1. **Два различных алгоритма** построения линий с визуальным сравнением
2. **Интерактивный интерфейс** для исследования свойств алгоритмов
3. **Инструменты измерения** производительности
4. **Гибкую систему координат** с настраиваемой сеткой

Приложение демонстрирует практическое применение фундаментальных алгоритмов компьютерной графики и предоставляет удобную платформу для их изучения и сравнения.
