# Лабораторная работа №2 Разработка приложения для обработки изображений

**Цель работы:** Создание графического приложения на Java для обработки изображений с использованием методов контрастирования и эквализации гистограмм с помощью библиотеки Swing.

## Описание программы

Программа `Main` представляет собой графическое приложение для обработки изображений с использованием трех основных методов улучшения качества: линейного контрастирования, эквализации гистограмм в RGB-пространстве и эквализации яркости в HSV-пространстве. Приложение предоставляет визуализацию исходного и обработанного изображений, а также их гистограмм.

## Функциональность

**Методы обработки изображений:**
- Линейное контрастирование
- Эквализация гистограммы по каналам RGB
- Эквализация яркости в HSV-пространстве

**Элементы управления:**
- Кнопки загрузки, сохранения, применения фильтров и сброса
- Выпадающий список для выбора метода обработки
- Панели для отображения оригинального и обработанного изображений
- Панели гистограмм для визуализации распределения цветов

**Визуализация:**
- Параллельное отображение оригинального и обработанного изображений
- Гистограммы красного, зеленого и синего каналов
- Сравнение гистограмм до и после обработки

## Техническая реализация

### Структура интерфейса

**Основные компоненты:**
- `JFrame` - главное окно приложения
- `JPanel` с `BorderLayout` - основная компоновка
- `GridLayout` для панели изображений (2×2)
- `TitledBorder` для группировки элементов

**Элементы управления:**
- `JButton` - кнопки управления
- `JComboBox` - выбор метода обработки
- `JLabel` - отображение изображений
- `HistogramPanel` - пользовательский компонент для рисования гистограмм

### Алгоритмы обработки

#### 1. Линейное контрастирование

```java
private BufferedImage linearContrast(BufferedImage img)
```

**Принцип работы:**
- Вычисляется минимальное и максимальное значение яркости пикселей
- Создается линейная функция преобразования
- Каждый канал RGB преобразуется по формуле: `(value - min) * 255 / (max - min)`

**Особенности:**
- Работает с каждым цветовым каналом отдельно
- Автоматическое определение диапазона яркостей
- Нормализация значений в диапазон 0-255

#### 2. Эквализация RGB

```java
private BufferedImage equalizeRGB(BufferedImage img)
```

**Принцип работы:**
1. **Построение гистограмм** для каждого канала R, G, B
2. **Вычисление кумулятивной функции распределения (CDF)**
3. **Создание таблицы преобразования (LUT)** на основе CDF
4. **Применение LUT** к каждому пикселю

**Математическая основа:**
```
CDF(i) = Σ hist(j) для j=0..i
LUT(i) = round(CDF(i) * 255 / (width * height))
```

#### 3. Эквализация HSV

```java
private BufferedImage equalizeHSV(BufferedImage img)
```

**Принцип работы:**
1. **Преобразование RGB → HSV**
2. **Построение гистограммы** только для компоненты Value (яркости)
3. **Вычисление CDF** и создание LUT для яркости
4. **Обратное преобразование HSV → RGB** с новой яркостью

**Преимущества:**
- Сохраняет цветовой тон (Hue) и насыщенность (Saturation)
- Естественное улучшение яркости
- Избегает цветовых искажений

### Класс HistogramPanel

**Назначение:** Визуализация гистограмм цветовых каналов

**Функциональность:**
- Отображение гистограмм R, G, B каналов
- Автоматическое масштабирование по высоте панели
- Раздельное цветовое кодирование каналов

**Методы:**
- `setImage(BufferedImage img)` - вычисление гистограмм
- `paintComponent(Graphics g)` - отрисовка гистограмм

## Использование приложения

### Последовательность работы:

1. **Загрузка изображения**
   - Нажать кнопку "Загрузить"
   - Выбрать файл изображения
   - Автоматически отображаются оригинал и его гистограмма

2. **Выбор метода обработки**
   - Выбрать нужный метод из выпадающего списка
   - Доступные варианты:
     - Линейное контрастирование
     - Эквализация RGB
     - Эквализация яркости (HSV)

3. **Применение обработки**
   - Нажать кнопку "Применить"
   - Результат отображается в правой части
   - Гистограмма результата строится автоматически

4. **Сравнение результатов**
   - Визуальное сравнение изображений
   - Анализ изменений на гистограммах
   - При необходимости - сброс или сохранение

5. **Сохранение результата**
   - Нажать кнопку "Сохранить"
   - Выбрать место сохранения в формате PNG

### Особенности работы:

- **Гистограммы** отображаются в реальном времени
- **Цветовые каналы** на гистограммах: красный, зеленый, синий
- **Масштабирование** гистограмм автоматически подстраивается под данные
- **Поддержка** различных форматов изображений через ImageIO

## Технические особенности реализации

### Обработка изображений:
- Использование `BufferedImage` для работы с пикселями
- Эффективные алгоритмы с минимальным потреблением памяти
- Корректная обработка граничных значений

### Потокобезопасность:
- Использование `SwingUtilities.invokeLater()`
- Правильная работа с графическим интерфейсом

### Обработка ошибок:
- Защита от отсутствия изображения
- Корректная работа с файловой системой
- Обработка исключений при загрузке/сохранении

Заключение:

В ходе лабораторной работы было разработано приложение для обработки изображений, реализующее основные методы улучшения качества через манипуляцию с гистограммами. Программа демонстрирует:

1. **Практическое применение** теории обработки изображений
2. **Эффективность различных методов** контрастирования и эквализации
3. **Визуализацию гистограмм** для анализа результатов
4. **Удобный графический интерфейс** для интерактивной работы

Приложение успешно решает задачи улучшения видимости деталей, коррекции яркости и контраста изображений, предоставляя пользователю инструменты для профессиональной обработки.
