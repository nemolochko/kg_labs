# Лабораторная работа №4 Визуализация алгоритмов отсечения

**Цель работы:** Создание графического приложения на Java для визуализации алгоритмов отсечения отрезков и многоугольников, включая алгоритм Лианга-Барски и алгоритм Сазерленда-Ходжмана.

## Описание программы

Программа `Main` представляет собой интерактивное приложение для визуализации алгоритмов отсечения геометрических примитивов относительно прямоугольного окна. Приложение поддерживает два основных алгоритма и предоставляет средства для загрузки данных, выполнения отсечения и визуального анализа результатов.

## Функциональность

**Поддерживаемые алгоритмы:**
- Алгоритм Лианга-Барски для отсечения отрезков
- Алгоритм Сазерленда-Ходжмана для отсечения выпуклых многоугольников

**Основные возможности:**
- Загрузка данных из файла
- Визуализация исходных и отсеченных примитивов
- Отображение координатной системы
- Интерактивное управление процессом отсечения
- Сброс результатов для повторного анализа

## Техническая реализация

### Архитектура приложения

**Основные классы:**
- `Main` - главный класс приложения, наследуется от JFrame
- `DrawingPanel` - внутренний класс для отрисовки графики
- `LineSegment` - класс для представления отрезков
- `Polygon` - класс для представления многоугольников

**Структура данных:**
- `originalSegments` - список исходных отрезков
- `clippedSegments` - список отсеченных отрезков  
- `originalPolygons` - список исходных многоугольников
- `clippedPolygons` - список отсеченных многоугольников
- `xMin, yMin, xMax, yMax` - границы окна отсечения

### Алгоритмы отсечения

#### 1. Алгоритм Лианга-Барски

```java
private LineSegment liangBarskyClip(LineSegment segment)
```

**Математическая основа:**
- Параметрическое представление отрезка: P(t) = P₁ + t(P₂ - P₁)
- Использование параметров p и q для определения видимости
- Вычисление параметров u1 и u2 для определения видимой части

**Ключевые этапы:**
1. Вычисление разностей координат dx, dy
2. Инициализация параметров p и q
3. Определение диапазона параметров u1 и u2
4. Проверка условия видимости (u1 ≤ u2)
5. Вычисление координат отсеченного отрезка

**Особенности реализации:**
- Эффективная обработка вырожденных случаев
- Минимальное количество арифметических операций
- Возврат null для полностью невидимых отрезков

#### 2. Алгоритм Сазерленда-Ходжмана

```java
private Polygon sutherlandHodgmanPolygonClip(Polygon polygon)
```

**Принцип работы:**
- Последовательное отсечение многоугольника каждой границей окна
- Использование метода разделяющих плоскостей
- Построение нового многоугольника после каждого этапа отсечения

**Основные методы:**
- `clipAgainstEdge()` - отсечение относительно одной границы
- `isInside()` - проверка нахождения точки внутри полуплоскости
- `computeIntersection()` - вычисление точки пересечения

**Процесс отсечения:**
1. Отсечение относительно левой границы (xMin)
2. Отсечение относительно правой границы (xMax)
3. Отсечение относительно нижней границы (yMin)
4. Отсечение относительно верхней границы (yMax)

### Графический интерфейс

**Компоненты управления:**
- `JComboBox` для выбора алгоритма
- Кнопки загрузки, выполнения отсечения и сброса
- Панель рисования с координатной системой

**Визуализация:**
- Синяя цветовая схема для исходных примитивов
- Красная цветовая схема для отсеченных примитивов
- Зеленое полупрозрачное окно отсечения
- Координатная сетка с подписями

### Обработка данных

**Загрузка из файла:**
```java
private void parseInputFile(File file) throws IOException
```

**Формат входного файла:**
- Первая строка: количество отрезков (n)
- Следующие n строк: x1 y1 x2 y2 для каждого отрезка
- Последняя строка: xMin yMin xMax yMax границы окна

**Пример данных:**
```
3
50 50 200 200
150 50 50 150
100 300 300 100
100 100 300 300
```

## Использование приложения

### Последовательность работы:

1. **Загрузка данных:**
   - Нажать кнопку "Загрузить файл"
   - Выбрать файл с данными в формате, описанном выше
   - Или использовать встроенные примеры данных

2. **Выбор алгоритма:**
   - Выбрать нужный алгоритм из выпадающего списка
   - "Алгоритм Лианга-Барски" - для работы с отрезками
   - "Отсечение выпуклого многоугольника" - для работы с многоугольниками

3. **Выполнение отсечения:**
   - Нажать кнопку "Выполнить отсечение"
   - Визуализация результатов на графической панели

4. **Анализ результатов:**
   - Синие линии/многоугольники - исходные объекты
   - Красные линии/многоугольники - отсеченные части
   - Зеленая область - окно отсечения

5. **Сброс результатов:**
   - Кнопка "Сброс" очищает результаты отсечения
   - Позволяет выполнить повторное отсечение с другими параметрами

### Особенности визуализации:

- **Масштабирование:** Автоматическое масштабирование под размер окна
- **Координатная система:** Отображение с подписями значений
- **Цветовое кодирование:** Четкое различие исходных и обработанных данных
- **Полупрозрачность:** Визуализация окна отсечения с прозрачностью

## Технические особенности

### Обработка графики:
- Использование `Graphics2D` для высококачественного рендеринга
- Включение сглаживания (ANTIALIASING)
- Поддержка прозрачности и различных толщин линий

### Производительность:
- Эффективные алгоритмы отсечения
- Минимальное количество вычислений при визуализации
- Оптимизированное преобразование координат

### Обработка ошибок:
- Защита от некорректных входных данных
- Обработка исключений при чтении файлов
- Проверка условий корректности многоугольников

## Сравнение алгоритмов

### Алгоритм Лианга-Барски:
- **Преимущества:** Высокая эффективность для отрезков, минимальные вычисления
- **Недостатки:** Только для прямоугольных окон отсечения

### Алгоритм Сазерленда-Ходжмана:
- **Преимущества:** Универсальность для выпуклых многоугольников, простота реализации
- **Недостатки:** Требует последовательной обработки всех границ

## Заключение

В ходе лабораторной работы было разработано приложение для визуализации алгоритмов отсечения, которое:

1. **Реализует два классических алгоритма** компьютерной графики
2. **Предоставляет интуитивный интерфейс** для исследования работы алгоритмов
3. **Обеспечивает наглядную визуализацию** процесса отсечения
4. **Поддерживает работу с файлами** для обработки пользовательских данных

Приложение демонстрирует практическое применение алгоритмов отсечения и предоставляет удобный инструмент для изучения их свойств и особенностей реализации.
